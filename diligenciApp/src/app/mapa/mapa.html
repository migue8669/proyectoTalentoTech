<div class="map-container">
  <div class="header">
    <h1>🌍 Servicio de Geolocalización</h1>
    <p>Visualiza, edita y gestiona tus ubicaciones en el mapa</p>
  </div>

  <google-map
    height="450px"
    width="100%"
    [options]="mapOptions"
    [center]="center"
    [zoom]="zoom"
    class="google-map"
  >
    @for (marker of markerPositions; track marker) {
      <map-marker
        #markerElem="mapMarker"
        [position]="{ lat: marker.lat, lng: marker.lng }"
        [title]="marker.title"
        (mapClick)="openInfoWindow(marker, markerElem, infoWindow)"
      ></map-marker>

      <map-info-window #infoWindow="mapInfoWindow">
        <div class="info-window">
          <strong>{{ marker.title }}</strong><br />
          <span>{{ marker.servicio }}</span><br />
          <small>{{ marker.direccion }}</small>

          <div class="marker-actions">
            <button class="btn-edit" (click)="editMarker(marker)">✏️ Editar</button>
            <button class="btn-delete" (click)="deleteMarker(marker)">🗑️ Eliminar</button>
          </div>
        </div>
      </map-info-window>
    }
  </google-map>

  <div class="muro-container">
    <app-muro [coordenadasEntrada]="newLocationData"></app-muro>
  </div>
</div>
